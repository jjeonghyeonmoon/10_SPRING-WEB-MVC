<!doctype html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Document</title>
</head>
<body>
        <h3>ğŸ§ì‹ ê·œ ë©”ë‰´ ë“±ë¡ í¼ ğŸ§</h3>
        <form action="/menu/regist" method="post">
            <label>ë©”ë‰´ ì´ë¦„ : <input type="text" name="name"></label><br>
            <label>ë©”ë‰´ ê°€ê²© : <input type="number" name="price" step="1000" min="0"></label><br>
            <label>ì¹´í…Œê³ ë¦¬ ì½”ë“œ : </label>
            <select name="categoryCode" id="categoryCode"></select><br>
            <label>íŒë§¤ìƒíƒœ : </label>
            <select name="orderableStatus">
                <option value="Y">Y</option>
                <option value="N">N</option>
            </select><br>
            <input type="submit" value="ì „ì†¡">
        </form>
        <script>
            /* comment.
            *   ë¹„ë™ê¸° ì²˜ë¦¬ í™”ë©´ì´ ë¡œë”©ë  ë•Œ ë¯¸ë¦¬ ë°ì´í„°ë¥¼ ë¶ˆëŸ¬ì™€
            *   í™”ë©´ì— ë¿Œë ¤ì¤Œ
            * */
            /* comment. fetch ë€ ê°•ì œë¡œ ì¡ì•„ì±„ë‹¤ ë¼ëŠ” ëœ»ì„ ê°€ì§*/
            /* comment.
                    fetch ëŠ” regist.html í˜ì´ì§€ê°€ ìš”ì²­ë˜ëŠ” ìˆœê°„ ë™ì‘ì„ í•œë‹¤.
                    ì¦‰, ìš°ë¦¬ê°€ ë¬¼ë¦¬ì ì¸ ë²„íŠ¼ì„ ëˆ„ë¥´ê±°ë‚˜, í˜ì´ì§€ ì´ë™ ë“±ì˜ ì‘ì—…ì„
                    í•˜ì§€ ì•Šë”ë¼ë„ ìš”ì²­ì„ ë³´ë‚¸ë‹¤ëŠ” ì˜ë¯¸ì´ë‹¤.
                    /menu/category ìš”ì²­ì´ ëë‚˜ë©´ ëŒì•„ì˜¤ëŠ” ê°’ì€
                    json í˜•ì‹ì˜ ë¬¸ìì—´ ë°ì´í„°ì´ë‹¤. ex) {code: 3, name : í•œì‹}
                    ë”°ë¼ì„œ ìë°”ìŠ¤í¬ë¦½íŠ¸ ê°ì²´ë¡œì„œ ì“°ê¸° ìœ„í•´ì„œëŠ” ë¬¸ìì—´ ë°ì´í„°ë¥¼
                    ê°ì²´ í˜•íƒœë¡œ ë³€í™˜ì„ í•´ì£¼ì–´ì•¼ í•œë‹¤.
            */

            fetch("/menu/category")
                // json í˜•ì‹ì˜ ë¬¸ìì—´ ê°’ì„ ìë°”ìŠ¤í¬ë¦½íŠ¸ ê°ì²´ í˜•ì‹ìœ¼ë¡œ ë³€í™˜
                .then(res => res.json())     // ì´ êµ¬ë¬¸ì—ì„œ ìë°”ìŠ¤í¬ë¦½íŠ¸ ì‚¬ìš©í•  ìˆ˜ ìˆê²Œ ë³€í™˜ ì™„ë£Œ
                .then(data => {              // ë³€í™˜ ëœ ë°ì´í„°ê°€ data ë³€ìˆ˜ì— ë‹´ê¹€
                    //select íƒœê·¸ ê°€ì ¸ì˜´.
                    const $categoryCode = document.getElementById("categoryCode");
                    // for in ë°˜ë³µë¬¸ ë³€ìˆ˜ì— data ì— ìˆëŠ” í”„ë¡œí¼í‹° í‚¤ ëŒ€ì…
                    for(let index in data){
                        const $option = document.createElement("option");
                        $option.value = data[index].code;
                        $option.textContent = data[index].name;
                        $categoryCode.appendChild($option);
                    }
                })
        </script>

</body>
</html>